// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"bytes"
	"encoding/json"
	"errors"
)

type DestinationAuthMethodConfigType string

const (
	DestinationAuthMethodConfigTypeHookdeckSignature DestinationAuthMethodConfigType = "HookdeckSignature"
	DestinationAuthMethodConfigTypeBasicAuth         DestinationAuthMethodConfigType = "BasicAuth"
	DestinationAuthMethodConfigTypeAPIKey            DestinationAuthMethodConfigType = "APIKey"
	DestinationAuthMethodConfigTypeBearerToken       DestinationAuthMethodConfigType = "BearerToken"
	DestinationAuthMethodConfigTypeCustomSignature   DestinationAuthMethodConfigType = "CustomSignature"
)

type DestinationAuthMethodConfig struct {
	HookdeckSignature *HookdeckSignature
	BasicAuth         *BasicAuth
	APIKey            *APIKey
	BearerToken       *BearerToken
	CustomSignature   *CustomSignature

	Type DestinationAuthMethodConfigType
}

func CreateDestinationAuthMethodConfigHookdeckSignature(hookdeckSignature HookdeckSignature) DestinationAuthMethodConfig {
	typ := DestinationAuthMethodConfigTypeHookdeckSignature

	return DestinationAuthMethodConfig{
		HookdeckSignature: &hookdeckSignature,
		Type:              typ,
	}
}

func CreateDestinationAuthMethodConfigBasicAuth(basicAuth BasicAuth) DestinationAuthMethodConfig {
	typ := DestinationAuthMethodConfigTypeBasicAuth

	return DestinationAuthMethodConfig{
		BasicAuth: &basicAuth,
		Type:      typ,
	}
}

func CreateDestinationAuthMethodConfigAPIKey(apiKey APIKey) DestinationAuthMethodConfig {
	typ := DestinationAuthMethodConfigTypeAPIKey

	return DestinationAuthMethodConfig{
		APIKey: &apiKey,
		Type:   typ,
	}
}

func CreateDestinationAuthMethodConfigBearerToken(bearerToken BearerToken) DestinationAuthMethodConfig {
	typ := DestinationAuthMethodConfigTypeBearerToken

	return DestinationAuthMethodConfig{
		BearerToken: &bearerToken,
		Type:        typ,
	}
}

func CreateDestinationAuthMethodConfigCustomSignature(customSignature CustomSignature) DestinationAuthMethodConfig {
	typ := DestinationAuthMethodConfigTypeCustomSignature

	return DestinationAuthMethodConfig{
		CustomSignature: &customSignature,
		Type:            typ,
	}
}

func (u *DestinationAuthMethodConfig) UnmarshalJSON(data []byte) error {
	var d *json.Decoder

	hookdeckSignature := new(HookdeckSignature)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&hookdeckSignature); err == nil {
		u.HookdeckSignature = hookdeckSignature
		u.Type = DestinationAuthMethodConfigTypeHookdeckSignature
		return nil
	}

	basicAuth := new(BasicAuth)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&basicAuth); err == nil {
		u.BasicAuth = basicAuth
		u.Type = DestinationAuthMethodConfigTypeBasicAuth
		return nil
	}

	apiKey := new(APIKey)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&apiKey); err == nil {
		u.APIKey = apiKey
		u.Type = DestinationAuthMethodConfigTypeAPIKey
		return nil
	}

	bearerToken := new(BearerToken)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&bearerToken); err == nil {
		u.BearerToken = bearerToken
		u.Type = DestinationAuthMethodConfigTypeBearerToken
		return nil
	}

	customSignature := new(CustomSignature)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&customSignature); err == nil {
		u.CustomSignature = customSignature
		u.Type = DestinationAuthMethodConfigTypeCustomSignature
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u DestinationAuthMethodConfig) MarshalJSON() ([]byte, error) {
	if u.HookdeckSignature != nil {
		return json.Marshal(u.HookdeckSignature)
	}

	if u.BasicAuth != nil {
		return json.Marshal(u.BasicAuth)
	}

	if u.APIKey != nil {
		return json.Marshal(u.APIKey)
	}

	if u.BearerToken != nil {
		return json.Marshal(u.BearerToken)
	}

	if u.CustomSignature != nil {
		return json.Marshal(u.CustomSignature)
	}

	return nil, nil
}
